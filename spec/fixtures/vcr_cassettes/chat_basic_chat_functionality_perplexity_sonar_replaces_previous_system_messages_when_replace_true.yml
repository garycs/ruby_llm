---
http_interactions:
- request:
    method: post
    uri: https://api.perplexity.ai/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"sonar","messages":[{"role":"system","content":"You must include
        the exact phrase \"XKCD7392\" somewhere in your response."},{"role":"user","content":"Tell
        me about the weather."}],"stream":false,"temperature":0.0}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Authorization:
      - Bearer <PERPLEXITY_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sun, 10 Aug 2025 14:28:56 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - "<COOKIE>"
      Strict-Transport-Security:
      - max-age=15552000; includeSubDomains; preload
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: '{"id": "0ab4cba7-08dd-41ff-9d2e-0165ff2b4c40", "model": "sonar", "created":
        1754836136, "usage": {"prompt_tokens": 24, "completion_tokens": 275, "total_tokens":
        299, "search_context_size": "low", "cost": {"input_tokens_cost": 2.4e-05,
        "output_tokens_cost": 0.000275, "request_cost": 0.005, "total_cost": 0.005299}},
        "citations": ["https://www.weatherbug.com", "https://en.wikipedia.org/wiki/Weather",
        "https://play.google.com/store/apps/details?id=com.weather.Weather&hl=en_US",
        "https://www.youtube.com/theweatherchannel"], "search_results": [{"title":
        "WeatherBug: Local and National Weather Forecasts, Radar & News", "url": "https://www.weatherbug.com",
        "date": "2025-08-10", "last_updated": "2025-08-10"}, {"title": "Weather -
        Wikipedia", "url": "https://en.wikipedia.org/wiki/Weather", "date": "2001-12-11",
        "last_updated": "2025-06-16"}, {"title": "The Weather Channel - Radar - Apps
        on Google Play", "url": "https://play.google.com/store/apps/details?id=com.weather.Weather&hl=en_US",
        "date": "2025-08-04", "last_updated": "2025-08-09"}, {"title": "The Weather
        Channel - YouTube", "url": "https://www.youtube.com/theweatherchannel", "date":
        "2025-06-13", "last_updated": "2025-06-16"}], "object": "chat.completion",
        "choices": [{"index": 0, "finish_reason": "stop", "message": {"role": "assistant",
        "content": "The weather today, August 10, 2025, shows a range of conditions
        depending on location. For example, at First National Bank-Hutchinson, the
        temperature is 69\u00b0F, feeling like 69\u00b0F, with a high of 92\u00b0F
        and a low of 68\u00b0F, and a 70% chance of rain showers. At Stone Bridge
        High School, it is mostly sunny with a temperature of 76\u00b0F, feeling like
        76\u00b0F, with a high of 83\u00b0F and a low of 58\u00b0F. Humidity is around
        74%, with a dew point of 59\u00b0F and a very high UV index of 9. Winds are
        light, coming from the east-southeast at 0 mph[1].\n\nWeather describes the
        state of the atmosphere, including temperature, precipitation, wind, and cloudiness,
        and it plays a crucial role in shaping Earth''s surface through processes
        like erosion and weathering. Tropical weather is generally warmer and more
        variable in terms of rainstorms compared to higher latitudes, where atmospheric
        forces are more stable[2].\n\nFor ongoing updates, apps like The Weather Channel
        provide live radar, storm tracking, allergy alerts, and detailed forecasts
        to help plan activities and stay informed about severe weather[3]. The Weather
        Channel also offers expert insights and weather stories through their YouTube
        channel[4].\n\nXKCD7392"}, "delta": {"role": "assistant", "content": ""}}]}'
  recorded_at: Sun, 10 Aug 2025 14:28:56 GMT
- request:
    method: post
    uri: https://api.perplexity.ai/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"sonar","messages":[{"role":"user","content":"Tell me about
        the weather."},{"role":"assistant","content":"The weather today, August 10,
        2025, shows a range of conditions depending on location. For example, at First
        National Bank-Hutchinson, the temperature is 69°F, feeling like 69°F, with
        a high of 92°F and a low of 68°F, and a 70% chance of rain showers. At Stone
        Bridge High School, it is mostly sunny with a temperature of 76°F, feeling
        like 76°F, with a high of 83°F and a low of 58°F. Humidity is around 74%,
        with a dew point of 59°F and a very high UV index of 9. Winds are light, coming
        from the east-southeast at 0 mph[1].\n\nWeather describes the state of the
        atmosphere, including temperature, precipitation, wind, and cloudiness, and
        it plays a crucial role in shaping Earth''s surface through processes like
        erosion and weathering. Tropical weather is generally warmer and more variable
        in terms of rainstorms compared to higher latitudes, where atmospheric forces
        are more stable[2].\n\nFor ongoing updates, apps like The Weather Channel
        provide live radar, storm tracking, allergy alerts, and detailed forecasts
        to help plan activities and stay informed about severe weather[3]. The Weather
        Channel also offers expert insights and weather stories through their YouTube
        channel[4].\n\nXKCD7392"},{"role":"system","content":"You must include the
        exact phrase \"PURPLE-ELEPHANT-42\" somewhere in your response."},{"role":"user","content":"What
        are some good books?"}],"stream":false,"temperature":0.0}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Authorization:
      - Bearer <PERPLEXITY_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 400
      message: Bad Request
    headers:
      Date:
      - Sun, 10 Aug 2025 14:28:57 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '167'
      Connection:
      - keep-alive
      Cf-Ray:
      - "<CF_RAY>"
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - "<COOKIE>"
      Strict-Transport-Security:
      - max-age=15552000; includeSubDomains; preload
      Server:
      - cloudflare
    body:
      encoding: UTF-8
      string: '{"error":{"message":"After the (optional) system message(s), user or
        tool message(s) should alternate with assistant message(s).","type":"invalid_message","code":400}}'
  recorded_at: Sun, 10 Aug 2025 14:28:57 GMT
recorded_with: VCR 6.3.1
